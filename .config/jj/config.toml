[user]
name = "Dmytro Somliev"
email = "somleff@gmail.com"

[[--scope]]
--when.repositories = ["~/Code"]
[--scope.user]
email = "dmytro.somliev@ibm.com"

[template-aliases]
'format_short_id(id)' = 'id.shortest()'
"format_timestamp(timestamp)" = "timestamp.ago()"

[remotes.origin]
auto-track-bookmarks = "*"
auto-track-created-bookmarks = "~*"

# [experimental-advance-branches]
# enabled-branches = ["glob:*"]
# disabled-branches = ["main", "dev", "glob:push-*"]

[ui]
merge-editor = "webstorm"

[merge-tools.webstorm]
program = "/Applications/WebStorm.app/Contents/MacOS/webstorm"
edit-args = ["diff", "$left", "$right"]
merge-args = ["merge", "$right", "$left", "$base", "$output"]
diff-args = ["diff", "$left", "$right"]

[templates]
    # "(no description set)"
# " ",
# label("commit_id", format_short_id(self.commit_id())),
log = '''
if(root,
    format_root_commit(self),
    label(if(current_working_copy, "working_copy"),
        concat(
            label("change_id", format_short_change_id_with_change_offset(self)),
            " ",
            author.email().local(),
            "\n",
            if(empty, label("empty", "(empty) ")),
            if(
                description.first_line(),
                label("description", description.first_line()),
                label("description", "âˆ…")
            ),
            if(bookmarks || remote_bookmarks,
                " " ++ label("branches",
                separate(" ",
                    bookmarks,
                    remote_bookmarks.filter(|b| b.remote() != "git" && !b.tracked())
                )
            )
          ),
          if(divergent, " " ++ label("divergent", "divergent") ++ "\n")
        ),
    ),
)
'''

draft_commit_description ='''
    concat(
      coalesce(description, default_commit_description, "\n"),
      surround(
        "\nJJ: This commit contains the following changes:\n", "",
        indent("JJ:     ", diff.stat(72)),
      ),
      "\nJJ: ignore-rest\n",
      diff.git(),
    )
'''
